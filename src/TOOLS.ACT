;------------------------------------------------------------------------------
; RUNTIME PROCEDURES AND FUNCTIONS
;------------------------------------------------------------------------------

PROC Poke=*(CARD a BYTE v)
[$85$A0$86$A1$98$A0$00$91$A0$60]
; 0E5A: 85 A0     STA $A0     ;TSLNUM
; 0E5C: 86 A1     STX $A1     ;TSLNUM+1
; 0E5E: 98        TYA
; 0E5F: A0 00     LDY #$00
; 0E61: 91 A0     STA ($A0),Y ;TSLNUM
; 0E63: 60        RTS

PROC PokeC=*(CARD a, v)
[$20 Poke $C8$A5$A3$91$A0$60]
; 0E64: 20 5A 0E  JSR $0E5A
; 0E67: C8        INY
; 0E68: A5 A3     LDA $A3     ;MVLNG+1
; 0E6A: 91 A0     STA ($A0),Y ;TSLNUM
; 0E6C: 60        RTS

BYTE FUNC Peek=*(CARD a)
[$85$A2$86$A3$A0$00$B1$A2$85$A0$60]

CARD FUNC PeekC=*(CARD a)
[$85$A2$86$A3$A0$00$B1$A2$85$A0$C8$B1
$A2$85$A1$60]

PROC SetBlock=*(CARD a, l, v)
[$85$A0$86$A1$84$A2$A0$00$A5$A2$D0$04
$A5$A3$F0$16$A5$A4$91$A0$C8$D0$02$E6
$A1$C6$A2$A5$A2$C9$FF$D0$E7$C6$A3$38
$B0$E2$60]

PROC MoveBlock=*(CARD d, s, l)
[$85$A0$86$A1$84$A2$A0$00$A5$A4$D0$04
$A5$A5$F0$18$B1$A2$91$A0$C8$D0$04$E6
$A1$E6$A3$C6$A4$A5$A4$C9$FF$D0$E5$C6
$A5$38$B0$E0$60]

;------------------------------------------------------------------------------
; CUSTOM PROCEDURES AND FUNCTIONS
;------------------------------------------------------------------------------

;------------------------------------------------------------------------------
; DRAW TERRAIN CHAR
;------------------------------------------------------------------------------
PROC TerPoke=*(BYTE v)
[$A0$00$91$5E$60]
; 0E6D: A0 00     LDY #$00
; 0E6F: 91 5E     STA ($5E),Y ;OLDADR
; 0E71: 60        RTS

;------------------------------------------------------------------------------
; DRAW BUILDINGS CHAR
;------------------------------------------------------------------------------
PROC ElmPoke=*(BYTE v)
[$A0$00$91$CA$60]
; 0E72: A0 00     LDY #$00
; 0E74: 91 CA     STA ($CA),Y ;LOADFLG
; 0E76: 60        RTS

;------------------------------------------------------------------------------
; DRAW BUILDINGS TWO CHARS
;------------------------------------------------------------------------------
PROC ElmPokeC=*(CARD v)
[$A0$00$91$CA$C8$8A$91$CA$60]
; 0E77: A0 00     LDY #$00
; 0E79: 91 CA     STA ($CA),Y ;LOADFLG
; 0E7B: C8        INY
; 0E7C: 8A        TXA
; 0E7D: 91 CA     STA ($CA),Y ;LOADFLG
; 0E7F: 60        RTS

;------------------------------------------------------------------------------
; WAIT 0-255 FRAMES
;------------------------------------------------------------------------------
PROC WAIT=*(BYTE F)[$18$65$14$C5$14$D0$FC$60]
; 110A: 18        CLC
; 110B: 65 14     ADC $14     ;RTCLOK+2
; 110D: C5 14     CMP $14     ;RTCLOK+2
; 110F: D0 FC     BNE $110D
; 1111: 60        RTS

;------------------------------------------------------------------------------
; WAIT FOR GIVEN RASTER LINE
;------------------------------------------------------------------------------
PROC RSYNC=*(BYTE L)[$CD$0B$D4$D0$FB$60]
; 1112: CD 0B D4  CMP $D40B   ;VCOUNT
; 1115: D0 FB     BNE $1112
; 1117: 60        RTS

;------------------------------------------------------------------------------
; SET SYSTEM TIMERS DURING THE VBLANK ROUTINE.
; USES THE 6502 X REGISTER FOR THE MSB OF VECTOR/TIMES,
; Y FOR THE LSB AND A FOR THE NUMBER OF THE VECTOR TO HACK (CHANGE).
;------------------------------------------------------------------------------
PROC SETVBLK=SETVBV(BYTE WHICH,MSB,LSB)

;------------------------------------------------------------------------------
; RESET WORKING VARIABLES
;------------------------------------------------------------------------------
PROC RESETVARS=*()
  ISCANONN=0 ROW=0
  SCREENI=STARTTERRAIN
  LMS=STARTSCREEN
RET