;------------------------------------------------------------------------------
; TOOLING PROCEDURES AND FUNCTIONS
;------------------------------------------------------------------------------

;------------------------------------------------------------------------------
; WAIT 0-255 FRAMES
;------------------------------------------------------------------------------
PROC WAIT=*(BYTE F)[$18$65$14$C5$14$D0$FC$60]

; 110A: 18        CLC
; 110B: 65 14     ADC $14     ;RTCLOK+2
; 110D: C5 14     CMP $14     ;RTCLOK+2
; 110F: D0 FC     BNE $110D
; 1111: 60        RTS

;------------------------------------------------------------------------------
; WAIT FOR GIVEN RASTER LINE
;------------------------------------------------------------------------------
PROC RSYNC=*(BYTE L)[$CD$0B$D4$D0$FB$60]

; 1112: CD 0B D4  CMP $D40B   ;VCOUNT
; 1115: D0 FB     BNE $1112
; 1117: 60        RTS

;------------------------------------------------------------------------------
; SET SYSTEM TIMERS DURING THE VBLANK ROUTINE.
; USES THE 6502 X REGISTER FOR THE MSB OF VECTOR/TIMES,
; Y FOR THE LSB AND A FOR THE NUMBER OF THE VECTOR TO HACK (CHANGE).
;------------------------------------------------------------------------------
PROC SETVBLK=SETVBV(BYTE WHICH,MSB,LSB)

;------------------------------------------------------------------------------
; LOAD (OR SAVE) BINARY DATA TO THE INDICATED ADDRESS
; M=4 LOAD, M=8 SAVE
;------------------------------------------------------------------------------
PROC LOAD(CARD FILE,STARTADDR,NBYTES, BYTE M)
  CLOSE(2) OPEN(2,FILE,M,128)
  IF M=4 THEN POKE($362,7)
  ELSE POKE($362,11) FI
  POKEC($364,STARTADDR) POKEC($368,NBYTES)
  [$A2$20$20$56$E4$85$A3] CLOSE(2)
RETURN
