;------------------------------------------------------------------------------
; MAIN LOOP
;------------------------------------------------------------------------------

PROC MAINLOOP()
  DO

    IF HSCROLI=$FF THEN
      TERRAIN()
      IF LMS=STARTSCREEN+LOOP THEN
        WAIT($64)
        SETBLOCK(STARTSCREEN+STARTROW+$120,$30,GLADE)
        NEXTROW=0 SCREENI=STARTROW LMS=STARTSCREEN
      ELSE
        LMS==+1 SCREENI==+1
      FI
      HSCROLI=3
    FI

    HSCROL=HSCROLI HSCROLI==-1
    WAIT(1)

  OD
RET
